<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Payroll Calculator</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .main-content {
            display: flex;
            flex-wrap: wrap;
            min-height: 600px;
        }

        .form-section {
            flex: 1;
            min-width: 600px;
            padding: 30px;
            background: #f8f9fa;
        }

        .results-section {
            flex: 1;
            min-width: 500px;
            padding: 30px;
            background: white;
        }

        .section-title {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }

        .form-row .form-group {
            flex: 1;
            margin-bottom: 0;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #34495e;
        }

        input, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            width: 100%;
            margin-top: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%);
            margin-right: 10px;
            width: auto;
            display: inline-block;
        }

        .btn-template {
            background: linear-gradient(135deg, #16a085 0%, #27ae60 100%);
            padding: 12px 15px;
            width: auto;
            flex: 1;
            text-align: center;
            font-size: 14px;
            line-height: 1.2;
        }

        .btn-template:hover {
            background: linear-gradient(135deg, #138d75 0%, #229954 100%);
        }

        .btn-template.day-shift {
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
        }

        .btn-template.day-shift:hover {
            background: linear-gradient(135deg, #d68910 0%, #ca6f1e 100%);
        }

        .btn-template.evening-shift {
            background: linear-gradient(135deg, #8e44ad 0%, #9b59b6 100%);
        }

        .btn-template.evening-shift:hover {
            background: linear-gradient(135deg, #7d3c98 0%, #884ea0 100%);
        }

        .btn-template.night-shift {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        }

        .btn-template.night-shift:hover {
            background: linear-gradient(135deg, #273746 0%, #2e4057 100%);
        }

        .template-buttons {
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 2px solid #e9ecef;
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            width: auto;
            padding: 8px 15px;
            font-size: 14px;
        }

        .shift-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            position: relative;
        }

        .shift-card.holiday {
            border-color: #f39c12;
            background: #fef9e7;
        }

        .shift-card.weekend {
            border-color: #9b59b6;
            background: #f4ecf7;
        }

        .shift-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .shift-title {
            font-weight: bold;
            color: #2c3e50;
        }

        .shift-premiums {
            margin-top: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
            border-left: 4px solid #3498db;
        }

        .premium-tag {
            display: inline-block;
            background: #3498db;
            color: white;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 12px;
            margin-right: 5px;
            margin-bottom: 3px;
        }

        .premium-tag.night {
            background: #2c3e50;
        }

        .premium-tag.evening {
            background: #f39c12;
        }

        .premium-tag.weekend {
            background: #9b59b6;
        }

        .premium-tag.holiday {
            background: #e74c3c;
        }

        .premium-tag.overtime {
            background: #27ae60;
        }

        .employee-list {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .employee-item {
            background: white;
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 5px;
            border-left: 4px solid #3498db;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .employee-item:hover {
            background: #ecf0f1;
            transform: translateX(5px);
        }

        .employee-item.selected {
            border-left-color: #27ae60;
            background: #e8f5e8;
        }

        .alert {
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 8px;
            background: #f39c12;
            color: white;
            font-weight: 600;
        }

        .alert.success {
            background: #27ae60;
        }

        .alert.error {
            background: #e74c3c;
        }

        .alert.info {
            background: #3498db;
        }

        .pay-stub {
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 25px;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
        }

        .pay-stub-header {
            text-align: center;
            border-bottom: 2px solid #34495e;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }

        .pay-stub-title {
            font-size: 1.5em;
            font-weight: bold;
            color: #2c3e50;
        }

        .pay-stub-section {
            margin-bottom: 20px;
        }

        .pay-stub-section h4 {
            color: #34495e;
            margin-bottom: 10px;
            font-size: 1.1em;
            border-bottom: 1px solid #bdc3c7;
            padding-bottom: 5px;
        }

        .pay-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            padding: 2px 0;
        }

        .pay-row.gross-pay {
            font-size: 1.2em;
            background: #e8f5e8;
            padding: 10px;
            border-radius: 5px;
            border: 2px solid #27ae60;
            font-weight: bold;
        }

        .shifts-list {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 10px;
            background: white;
        }

        .summary-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            text-align: center;
        }

        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #2c3e50;
        }

        .stat-label {
            font-size: 0.9em;
            color: #7f8c8d;
            margin-top: 5px;
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .form-section, .results-section {
                min-width: auto;
            }
            
            .form-row {
                flex-direction: column;
            }

            .summary-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üïê Smart Payroll Calculator</h1>
            <p>Add shifts with dates/times - automatic calculation of weekends, nights, evenings, holidays & overtime</p>
        </div>

        <div class="main-content">
            <div class="form-section">
                <h2 class="section-title">Employee & Shift Management</h2>
                
                <!-- Employee Management -->
                <div class="form-group">
                    <h3>Add New Employee</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="employeeName">Name</label>
                            <input type="text" id="employeeName" placeholder="Enter employee name">
                        </div>
                        <div class="form-group">
                            <label for="hourlyRate">Hourly Rate ($)</label>
                            <input type="number" id="hourlyRate" step="0.01" placeholder="0.00">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="department">Department</label>
                            <input type="text" id="department" placeholder="Enter department">
                        </div>
                        <div class="form-group">
                            <button class="btn btn-secondary" onclick="addEmployee()">Add Employee</button>
                        </div>
                    </div>
                </div>

                <!-- Employee List -->
                <div class="employee-list">
                    <h4>Select Employee:</h4>
                    <div id="employeeList">
                        <div class="alert">No employees added yet. Add an employee above to get started.</div>
                    </div>
                </div>

                <!-- Shift Entry -->
                <div class="form-group">
                    <h3>Add Shift</h3>
                    
                    <!-- Quick Shift Templates -->
                    <div class="template-buttons">
                        <h4 style="margin-bottom: 10px; color: #34495e;">Quick Templates:</h4>
                        <div class="form-row">
                            <button type="button" class="btn btn-template day-shift" onclick="setShiftTemplate('07:00', '15:00')">
                                ‚òÄÔ∏è Day Shift<br><small>07:00 - 15:00</small>
                            </button>
                            <button type="button" class="btn btn-template evening-shift" onclick="setShiftTemplate('15:00', '23:00')">
                                üåÖ Evening Shift<br><small>15:00 - 23:00</small>
                            </button>
                            <button type="button" class="btn btn-template night-shift" onclick="setShiftTemplate('23:00', '07:00')">
                                üåô Night Shift<br><small>23:00 - 07:00</small>
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="shiftDate">Date</label>
                            <input type="date" id="shiftDate">
                        </div>
                        <div class="form-group">
                            <label for="shiftStart">Start Time</label>
                            <input type="time" id="shiftStart" step="900">
                        </div>
                        <div class="form-group">
                            <label for="shiftEnd">End Time</label>
                            <input type="time" id="shiftEnd" step="900">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="shiftType">Shift Type</label>
                            <select id="shiftType">
                                <option value="regular">Regular</option>
                                <option value="oncall">On-Call (+$3/hr)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <button class="btn btn-secondary" onclick="addShift()">Add Shift</button>
                        </div>
                    </div>
                </div>

                <!-- Pay Period Selection -->
                <div class="form-group">
                    <h3>Pay Period</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="payPeriodStart">Pay Period Start</label>
                            <input type="date" id="payPeriodStart">
                        </div>
                        <div class="form-group">
                            <label for="payPeriodEnd">Pay Period End</label>
                            <input type="date" id="payPeriodEnd">
                        </div>
                    </div>
                </div>

                <!-- Shifts List -->
                <div class="form-group">
                    <h3>Shifts in Pay Period</h3>
                    <div id="shiftsList" class="shifts-list">
                        <div class="alert info">Add shifts above to see them here. The calculator will automatically detect weekends, nights, evenings, holidays, and overtime.</div>
                    </div>
                </div>

                <button class="btn" onclick="calculatePayroll()">Calculate Payroll</button>
            </div>

            <div class="results-section">
                <h2 class="section-title">Payroll Results</h2>
                
                <!-- Summary Stats -->
                <div id="summaryStats" class="summary-stats" style="display: none;">
                    <div class="stat-card">
                        <div class="stat-value" id="totalHoursStat">0</div>
                        <div class="stat-label">Total Hours</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="overtimeHoursStat">0</div>
                        <div class="stat-label">Overtime Hours</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="weekendHoursStat">0</div>
                        <div class="stat-label">Weekend Hours</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="nightHoursStat">0</div>
                        <div class="stat-label">Night Hours</div>
                    </div>
                </div>

                <div id="results">
                    <div class="alert">
                        Select an employee and add shifts to calculate payroll.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        class SmartPayrollCalculator {
            constructor() {
                this.employees = [];
                this.shifts = [];
                this.payPeriods = [];
                this.nextId = 1;
                this.nextShiftId = 1;
                
                // BC Statutory Holidays 2025 (you can update these annually)
                this.holidays = [
                    '2025-01-01', // New Year's Day
                    '2025-02-17', // Family Day
                    '2025-03-29', // Good Friday
                    '2025-05-19', // Victoria Day
                    '2025-07-01', // Canada Day
                    '2025-08-04', // BC Day
                    '2025-09-01', // Labour Day
                    '2025-10-13', // Thanksgiving
                    '2025-11-11', // Remembrance Day
                    '2025-12-25', // Christmas Day
                    '2025-12-26', // Boxing Day
                ];

                // Premium holidays (2.0x rate)
                this.premiumHolidays = [
                    '2025-01-01', // New Year's Day
                    '2025-12-25', // Christmas Day
                ];
            }

            addEmployee(name, hourlyRate, department = 'General') {
                const employee = {
                    id: this.nextId++,
                    name,
                    hourlyRate,
                    department,
                    dateHired: new Date()
                };
                this.employees.push(employee);
                return employee;
            }

            getEmployee(id) {
                return this.employees.find(emp => emp.id === id);
            }

            addShift(employeeId, date, startTime, endTime, shiftType = 'regular') {
                const startDateTime = new Date(`${date}T${startTime}`);
                const endDateTime = new Date(`${date}T${endTime}`);
                
                // Handle overnight shifts
                if (endDateTime < startDateTime) {
                    endDateTime.setDate(endDateTime.getDate() + 1);
                }

                const duration = (endDateTime - startDateTime) / (1000 * 60 * 60); // hours

                const shift = {
                    id: this.nextShiftId++,
                    employeeId,
                    date,
                    startTime,
                    endTime,
                    startDateTime,
                    endDateTime,
                    duration,
                    shiftType,
                    premiums: this.calculateShiftPremiums(startDateTime, endDateTime, date)
                };

                this.shifts.push(shift);
                return shift;
            }

            calculateShiftPremiums(startDateTime, endDateTime, date) {
                const premiums = {
                    isWeekend: false,
                    isHoliday: false,
                    isPremiumHoliday: false,
                    nightHours: 0,
                    eveningHours: 0,
                    weekendHours: 0,
                    holidayHours: 0
                };

                // Check if weekend (Saturday = 6, Sunday = 0)
                const dayOfWeek = startDateTime.getDay();
                premiums.isWeekend = dayOfWeek === 0 || dayOfWeek === 6;

                // Check if holiday
                premiums.isHoliday = this.holidays.includes(date);
                premiums.isPremiumHoliday = this.premiumHolidays.includes(date);

                // Calculate time-based premiums hour by hour
                let currentTime = new Date(startDateTime);
                while (currentTime < endDateTime) {
                    const hour = currentTime.getHours();
                    
                    // Night shift: 11 PM to 7 AM
                    if (hour >= 23 || hour < 7) {
                        premiums.nightHours += 1;
                    }
                    // Evening shift: 3 PM to 11 PM
                    else if (hour >= 15 && hour < 23) {
                        premiums.eveningHours += 1;
                    }

                    // Weekend hours
                    if (premiums.isWeekend) {
                        premiums.weekendHours += 1;
                    }

                    // Holiday hours
                    if (premiums.isHoliday) {
                        premiums.holidayHours += 1;
                    }

                    currentTime.setHours(currentTime.getHours() + 1);
                }

                return premiums;
            }

            getShiftsInPeriod(employeeId, startDate, endDate) {
                return this.shifts.filter(shift => 
                    shift.employeeId === employeeId &&
                    shift.date >= startDate &&
                    shift.date <= endDate
                );
            }

            calculateOvertimeForPeriod(shifts) {
                // Group shifts by week and day for overtime calculations
                const dailyHours = {};
                const weeklyHours = {};

                shifts.forEach(shift => {
                    const date = shift.date;
                    const weekStart = this.getWeekStart(new Date(date));
                    const weekKey = weekStart.toISOString().split('T')[0];

                    // Daily hours
                    if (!dailyHours[date]) dailyHours[date] = 0;
                    dailyHours[date] += shift.duration;

                    // Weekly hours
                    if (!weeklyHours[weekKey]) weeklyHours[weekKey] = 0;
                    weeklyHours[weekKey] += shift.duration;
                });

                let overtimeHours15 = 0;
                let overtimeHours20 = 0;

                // Calculate daily overtime (over 8 hours per day)
                Object.values(dailyHours).forEach(dayHours => {
                    if (dayHours > 8) {
                        const dailyOT = Math.min(dayHours - 8, 4); // Max 4 hours of 1.5x per day
                        overtimeHours15 += dailyOT;
                        
                        if (dayHours > 12) {
                            overtimeHours20 += dayHours - 12; // Hours over 12 are 2.0x
                        }
                    }
                });

                // Calculate weekly overtime (over 40 hours per week)
                Object.values(weeklyHours).forEach(weekHours => {
                    if (weekHours > 40) {
                        const weeklyOT = weekHours - 40;
                        // Add to 1.5x if not already counted in daily OT
                        overtimeHours15 += Math.max(0, weeklyOT - overtimeHours15);
                    }
                });

                return { overtimeHours15, overtimeHours20 };
            }

            getWeekStart(date) {
                const d = new Date(date);
                const day = d.getDay();
                const diff = d.getDate() - day;
                return new Date(d.setDate(diff));
            }

            calculatePayroll(employeeId, payPeriodStart, payPeriodEnd) {
                const employee = this.getEmployee(employeeId);
                if (!employee) {
                    throw new Error(`Employee with ID ${employeeId} not found`);
                }

                const shifts = this.getShiftsInPeriod(employeeId, payPeriodStart, payPeriodEnd);
                if (shifts.length === 0) {
                    throw new Error('No shifts found for the selected pay period');
                }

                // Calculate totals
                const totalHours = shifts.reduce((sum, shift) => sum + shift.duration, 0);
                const nightHours = shifts.reduce((sum, shift) => sum + shift.premiums.nightHours, 0);
                const eveningHours = shifts.reduce((sum, shift) => sum + shift.premiums.eveningHours, 0);
                const weekendHours = shifts.reduce((sum, shift) => sum + shift.premiums.weekendHours, 0);
                const onCallHours = shifts.filter(s => s.shiftType === 'oncall').reduce((sum, shift) => sum + shift.duration, 0);

                // Calculate holiday hours
                const holidayHours15 = shifts.reduce((sum, shift) => {
                    return sum + (shift.premiums.isHoliday && !shift.premiums.isPremiumHoliday ? shift.duration : 0);
                }, 0);
                const holidayHours20 = shifts.reduce((sum, shift) => {
                    return sum + (shift.premiums.isPremiumHoliday ? shift.duration : 0);
                }, 0);

                // Calculate overtime
                const overtime = this.calculateOvertimeForPeriod(shifts);

                // Calculate regular hours
                const totalSpecialHours = overtime.overtimeHours15 + overtime.overtimeHours20 + holidayHours15 + holidayHours20;
                const regularHours = Math.max(0, totalHours - totalSpecialHours);

                // Calculate pay
                const regularPay = regularHours * employee.hourlyRate;
                const overtime15Pay = overtime.overtimeHours15 * employee.hourlyRate * 1.5;
                const overtime20Pay = overtime.overtimeHours20 * employee.hourlyRate * 2.0;
                const holiday15Pay = holidayHours15 * employee.hourlyRate * 1.5;
                const holiday20Pay = holidayHours20 * employee.hourlyRate * 2.0;

                // Premium pay
                const nightPremium = nightHours * 4.00;
                const eveningPremium = eveningHours * 2.00;
                const weekendPremium = weekendHours * 2.00;
                const onCallPremium = onCallHours * 3.00;

                const grossPay = regularPay + overtime15Pay + overtime20Pay + 
                               holiday15Pay + holiday20Pay + nightPremium + 
                               eveningPremium + weekendPremium + onCallPremium;

                return {
                    employeeId: employee.id,
                    employeeName: employee.name,
                    payPeriodStart,
                    payPeriodEnd,
                    shifts,
                    hours: {
                        total: totalHours,
                        regular: regularHours,
                        overtimeHours15: overtime.overtimeHours15,
                        overtimeHours20: overtime.overtimeHours20,
                        holidayHours15,
                        holidayHours20,
                        nightHours,
                        eveningHours,
                        weekendHours,
                        onCallHours
                    },
                    pay: {
                        hourlyRate: employee.hourlyRate,
                        regular: regularPay,
                        overtime15: overtime15Pay,
                        overtime20: overtime20Pay,
                        holiday15: holiday15Pay,
                        holiday20: holiday20Pay,
                        nightPremium,
                        eveningPremium,
                        weekendPremium,
                        onCallPremium,
                        gross: grossPay
                    },
                    calculatedAt: new Date()
                };
            }

            formatCurrency(amount) {
                return new Intl.NumberFormat('en-CA', {
                    style: 'currency',
                    currency: 'CAD'
                }).format(amount);
            }

            removeShift(shiftId) {
                this.shifts = this.shifts.filter(shift => shift.id !== shiftId);
            }
        }

        // Initialize payroll calculator
        const payroll = new SmartPayrollCalculator();
        let selectedEmployeeId = null;

        // Add some sample employees
        payroll.addEmployee('Layne Trudeau', 50.00, 'RN');
        payroll.addEmployee('Domonique Ballsack', 35.00, 'LPN');
        payroll.addEmployee('Lizzie Westerly', 28.00, 'Care Aide');

        // Set default dates
        const today = new Date();
        const twoWeeksAgo = new Date(today.getTime() - 14 * 24 * 60 * 60 * 1000);
        
        document.getElementById('payPeriodStart').value = twoWeeksAgo.toISOString().split('T')[0];
        document.getElementById('payPeriodEnd').value = today.toISOString().split('T')[0];
        document.getElementById('shiftDate').value = today.toISOString().split('T')[0];

        function setShiftTemplate(startTime, endTime) {
            document.getElementById('shiftStart').value = startTime;
            document.getElementById('shiftEnd').value = endTime;
            
            // Visual feedback
            const startInput = document.getElementById('shiftStart');
            const endInput = document.getElementById('shiftEnd');
            
            startInput.style.borderColor = '#27ae60';
            endInput.style.borderColor = '#27ae60';
            
            setTimeout(() => {
                startInput.style.borderColor = '#e0e0e0';
                endInput.style.borderColor = '#e0e0e0';
            }, 1000);
        }

        function addEmployee() {
            const name = document.getElementById('employeeName').value.trim();
            const hourlyRate = parseFloat(document.getElementById('hourlyRate').value);
            const department = document.getElementById('department').value.trim() || 'General';

            if (!name || !hourlyRate || hourlyRate <= 0) {
                showAlert('Please enter valid employee name and hourly rate.', 'error');
                return;
            }

            const employee = payroll.addEmployee(name, hourlyRate, department);
            showAlert(`Employee ${name} added successfully!`, 'success');
            
            // Clear form
            document.getElementById('employeeName').value = '';
            document.getElementById('hourlyRate').value = '';
            document.getElementById('department').value = '';
            
            updateEmployeeList();
        }

        function updateEmployeeList() {
            const employeeList = document.getElementById('employeeList');
            
            if (payroll.employees.length === 0) {
                employeeList.innerHTML = '<div class="alert">No employees added yet. Add an employee above to get started.</div>';
                return;
            }

            employeeList.innerHTML = payroll.employees.map(emp => `
                <div class="employee-item ${selectedEmployeeId === emp.id ? 'selected' : ''}" 
                     onclick="selectEmployee(${emp.id})">
                    <strong>${emp.name}</strong> - ${payroll.formatCurrency(emp.hourlyRate)}/hr - ${emp.department}
                </div>
            `).join('');
        }

        function selectEmployee(employeeId) {
            selectedEmployeeId = employeeId;
            updateEmployeeList();
            updateShiftsList();
        }

        function addShift() {
            if (!selectedEmployeeId) {
                showAlert('Please select an employee first.', 'error');
                return;
            }

            const date = document.getElementById('shiftDate').value;
            const startTime = document.getElementById('shiftStart').value;
            const endTime = document.getElementById('shiftEnd').value;
            const shiftType = document.getElementById('shiftType').value;

            if (!date || !startTime || !endTime) {
                showAlert('Please enter date, start time, and end time.', 'error');
                return;
            }

            try {
                const shift = payroll.addShift(selectedEmployeeId, date, startTime, endTime, shiftType);
                showAlert(`Shift added: ${shift.duration.toFixed(1)} hours`, 'success');
                
                // Clear form
                document.getElementById('shiftStart').value = '';
                document.getElementById('shiftEnd').value = '';
                
                updateShiftsList();
            } catch (error) {
                showAlert(`Error adding shift: ${error.message}`, 'error');
            }
        }

        function updateShiftsList() {
            const shiftsList = document.getElementById('shiftsList');
            const payPeriodStart = document.getElementById('payPeriodStart').value;
            const payPeriodEnd = document.getElementById('payPeriodEnd').value;
            
            if (!selectedEmployeeId || !payPeriodStart || !payPeriodEnd) {
                shiftsList.innerHTML = '<div class="alert info">Select an employee and pay period to view shifts.</div>';
                return;
            }

            const shifts = payroll.getShiftsInPeriod(selectedEmployeeId, payPeriodStart, payPeriodEnd);
            
            if (shifts.length === 0) {
                shiftsList.innerHTML = '<div class="alert info">No shifts found for this pay period. Add shifts above.</div>';
                return;
            }

            shiftsList.innerHTML = shifts.map(shift => {
                const premiums = [];
                if (shift.premiums.isWeekend) premiums.push('<span class="premium-tag weekend">Weekend</span>');
                if (shift.premiums.nightHours > 0) premiums.push(`<span class="premium-tag night">Night (${shift.premiums.nightHours}h)</span>`);
                if (shift.premiums.eveningHours > 0) premiums.push(`<span class="premium-tag evening">Evening (${shift.premiums.eveningHours}h)</span>`);
                if (shift.premiums.isHoliday) premiums.push(`<span class="premium-tag holiday">${shift.premiums.isPremiumHoliday ? 'Premium Holiday' : 'Holiday'}</span>`);
                if (shift.shiftType === 'oncall') premiums.push('<span class="premium-tag">On-Call</span>');

                const cardClass = shift.premiums.isHoliday ? 'holiday' : (shift.premiums.isWeekend ? 'weekend' : '');

                return `
                    <div class="shift-card ${cardClass}">
                        <div class="shift-header">
                            <div class="shift-title">
                                ${shift.date} ‚Ä¢ ${shift.startTime} - ${shift.endTime} 
                                (${shift.duration.toFixed(1)} hours)
                            </div>
                            <button class="btn btn-danger" onclick="removeShift(${shift.id})">Remove</button>
                        </div>
                        ${premiums.length > 0 ? `<div class="shift-premiums">${premiums.join('')}</div>` : ''}
                    </div>
                `;
            }).join('');
        }

        function removeShift(shiftId) {
            payroll.removeShift(shiftId);
            updateShiftsList();
            showAlert('Shift removed', 'success');
        }

        function calculatePayroll() {
            if (!selectedEmployeeId) {
                showAlert('Please select an employee first.', 'error');
                return;
            }

            const payPeriodStart = document.getElementById('payPeriodStart').value;
            const payPeriodEnd = document.getElementById('payPeriodEnd').value;

            if (!payPeriodStart || !payPeriodEnd) {
                showAlert('Please select pay period start and end dates.', 'error');
                return;
            }

            try {
                const payrollRecord = payroll.calculatePayroll(selectedEmployeeId, payPeriodStart, payPeriodEnd);
                displayPayStub(payrollRecord);
                updateSummaryStats(payrollRecord);
                showAlert('Payroll calculated successfully!', 'success');
            } catch (error) {
                showAlert(`Error: ${error.message}`, 'error');
            }
        }

        function updateSummaryStats(payrollRecord) {
            document.getElementById('summaryStats').style.display = 'grid';
            document.getElementById('totalHoursStat').textContent = payrollRecord.hours.total.toFixed(1);
            document.getElementById('overtimeHoursStat').textContent = (payrollRecord.hours.overtimeHours15 + payrollRecord.hours.overtimeHours20).toFixed(1);
            document.getElementById('weekendHoursStat').textContent = payrollRecord.hours.weekendHours.toFixed(1);
            document.getElementById('nightHoursStat').textContent = payrollRecord.hours.nightHours.toFixed(1);
        }

        function displayPayStub(payrollRecord) {
            const resultsDiv = document.getElementById('results');
            
            resultsDiv.innerHTML = `
                <div class="pay-stub">
                    <div class="pay-stub-header">
                        <div class="pay-stub-title">PAYROLL STUB</div>
                        <div style="margin-top: 10px;">
                            <strong>${payrollRecord.employeeName}</strong> (ID: ${payrollRecord.employeeId})<br>
                            Pay Period: ${payrollRecord.payPeriodStart} to ${payrollRecord.payPeriodEnd}<br>
                            Hourly Rate: ${payroll.formatCurrency(payrollRecord.pay.hourlyRate)}<br>
                            Total Shifts: ${payrollRecord.shifts.length}
                        </div>
                    </div>

                    <div class="pay-stub-section">
                        <h4>HOURS BREAKDOWN</h4>
                        <div class="pay-row">
                            <span>Total Hours:</span>
                            <span>${payrollRecord.hours.total.toFixed(1)}</span>
                        </div>
                        <div class="pay-row">
                            <span>Regular Hours:</span>
                            <span>${payrollRecord.hours.regular.toFixed(1)}</span>
                        </div>
                        <div class="pay-row">
                            <span>Overtime Hours (1.5x):</span>
                            <span>${payrollRecord.hours.overtimeHours15.toFixed(1)}</span>
                        </div>
                        <div class="pay-row">
                            <span>Overtime Hours (2.0x):</span>
                            <span>${payrollRecord.hours.overtimeHours20.toFixed(1)}</span>
                        </div>
                        <div class="pay-row">
                            <span>Holiday Hours (1.5x):</span>
                            <span>${payrollRecord.hours.holidayHours15.toFixed(1)}</span>
                        </div>
                        <div class="pay-row">
                            <span>Holiday Hours (2.0x):</span>
                            <span>${payrollRecord.hours.holidayHours20.toFixed(1)}</span>
                        </div>
                        <div class="pay-row">
                            <span>Night Shift Hours:</span>
                            <span>${payrollRecord.hours.nightHours.toFixed(1)}</span>
                        </div>
                        <div class="pay-row">
                            <span>Evening Shift Hours:</span>
                            <span>${payrollRecord.hours.eveningHours.toFixed(1)}</span>
                        </div>
                        <div class="pay-row">
                            <span>Weekend Hours:</span>
                            <span>${payrollRecord.hours.weekendHours.toFixed(1)}</span>
                        </div>
                        <div class="pay-row">
                            <span>On-Call Hours:</span>
                            <span>${payrollRecord.hours.onCallHours.toFixed(1)}</span>
                        </div>
                    </div>

                    <div class="pay-stub-section">
                        <h4>EARNINGS</h4>
                        <div class="pay-row">
                            <span>Regular Pay:</span>
                            <span>${payroll.formatCurrency(payrollRecord.pay.regular)}</span>
                        </div>
                        <div class="pay-row">
                            <span>Overtime Pay (1.5x):</span>
                            <span>${payroll.formatCurrency(payrollRecord.pay.overtime15)}</span>
                        </div>
                        <div class="pay-row">
                            <span>Overtime Pay (2.0x):</span>
                            <span>${payroll.formatCurrency(payrollRecord.pay.overtime20)}</span>
                        </div>
                        <div class="pay-row">
                            <span>Holiday Pay (1.5x):</span>
                            <span>${payroll.formatCurrency(payrollRecord.pay.holiday15)}</span>
                        </div>
                        <div class="pay-row">
                            <span>Holiday Pay (2.0x):</span>
                            <span>${payroll.formatCurrency(payrollRecord.pay.holiday20)}</span>
                        </div>
                        <div class="pay-row">
                            <span>Night Shift Premium (+$4/hr):</span>
                            <span>${payroll.formatCurrency(payrollRecord.pay.nightPremium)}</span>
                        </div>
                        <div class="pay-row">
                            <span>Evening Shift Premium (+$2/hr):</span>
                            <span>${payroll.formatCurrency(payrollRecord.pay.eveningPremium)}</span>
                        </div>
                        <div class="pay-row">
                            <span>Weekend Premium (+$2/hr):</span>
                            <span>${payroll.formatCurrency(payrollRecord.pay.weekendPremium)}</span>
                        </div>
                        <div class="pay-row">
                            <span>On-Call Premium (+$3/hr):</span>
                            <span>${payroll.formatCurrency(payrollRecord.pay.onCallPremium)}</span>
                        </div>
                    </div>

                    <div class="pay-row gross-pay">
                        <span><strong>GROSS PAY:</strong></span>
                        <span><strong>${payroll.formatCurrency(payrollRecord.pay.gross)}</strong></span>
                    </div>
                </div>
            `;
        }

        function showAlert(message, type = 'info') {
            // Remove existing alerts
            const existingAlerts = document.querySelectorAll('.temp-alert');
            existingAlerts.forEach(alert => alert.remove());

            // Create new alert
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert ${type} temp-alert`;
            alertDiv.textContent = message;
            alertDiv.style.position = 'fixed';
            alertDiv.style.top = '20px';
            alertDiv.style.right = '20px';
            alertDiv.style.zIndex = '1000';
            alertDiv.style.maxWidth = '300px';

            document.body.appendChild(alertDiv);

            // Remove alert after 3 seconds
            setTimeout(() => {
                alertDiv.remove();
            }, 3000);
        }

        // Event listeners for pay period changes
        document.getElementById('payPeriodStart').addEventListener('change', updateShiftsList);
        document.getElementById('payPeriodEnd').addEventListener('change', updateShiftsList);

        // Initialize the employee list on page load
        updateEmployeeList();
    </script>
</body>
</html>